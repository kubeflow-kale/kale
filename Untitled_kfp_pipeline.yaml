# PIPELINE DEFINITION
# Name: untitled
# Description: Generated from annotated notebook
components:
  comp-data-loading:
    executorLabel: exec-data-loading
    outputDefinitions:
      parameters:
        Output:
          parameterType: STRING
  comp-pipeline-metrics-4:
    executorLabel: exec-pipeline-metrics-4
    outputDefinitions:
      parameters:
        metrics:
          parameterType: STRUCT
  comp-preprocessing:
    executorLabel: exec-preprocessing
    outputDefinitions:
      parameters:
        Output:
          parameterType: STRING
deploymentSpec:
  executors:
    exec-data-loading:
      container:
        args:
        - --executor_input
        - '{{$}}'
        - --function_to_execute
        - data_loading
        command:
        - sh
        - -c
        - "\nif ! [ -x \"$(command -v pip)\" ]; then\n    python3 -m ensurepip ||\
          \ python3 -m ensurepip --user || apt-get install python3-pip\nfi\n\nPIP_DISABLE_PIP_VERSION_CHECK=1\
          \ python3 -m pip install --quiet --no-warn-script-location 'kfp==2.13.0'\
          \ '--no-deps' 'typing-extensions>=3.7.4,<5; python_version<\"3.9\"'  &&\
          \  python3 -m pip install --quiet --no-warn-script-location 'numpy' 'pandas'\
          \ 'scikit-learn' && \"$0\" \"$@\"\n"
        - sh
        - -ec
        - 'program_path=$(mktemp -d)


          printf "%s" "$0" > "$program_path/ephemeral_component.py"

          _KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         "$program_path/ephemeral_component.py"                         "$@"

          '
        - "\nimport kfp\nfrom kfp import dsl\nfrom kfp.dsl import *\nfrom typing import\
          \ *\n\ndef data_loading() -> str:\n    \"\"\"\n    Pipeline step: step:data-loading\n\
          \    Generated from notebook cell 2\n    Original tags: step:data-loading\n\
          \    \"\"\"\n    # Imports\n    import os\n    import sys\n    import json\n\
          \    import pickle\n    from pathlib import Path\n\n    print(\"\U0001F504\
          \ Executing data_loading component...\")\n    print(\"\U0001F4DD Original\
          \ cell content from notebook cell 2\")\n\n    # Original cell code\n   \
          \ print(\"Hello world!1\")\n\n    print(\"\u2705 data_loading component\
          \ execution completed\")\n\n    # Return results - Fixed version\n    result_vars\
          \ = [k for k in locals().keys() if not k.startswith('_') and not callable(locals().get(k,\
          \ None))]\n    if result_vars:\n        summary = f\"Executed successfully.\
          \ Created variables: {', '.join(result_vars[:5])}\"\n        if len(result_vars)\
          \ > 5:\n            summary += f\" and {len(result_vars) - 5} more\"\n \
          \       return summary\n    else:\n        return \"data_loading completed\
          \ successfully\"\n\n"
        image: python:3.9
    exec-pipeline-metrics-4:
      container:
        args:
        - --executor_input
        - '{{$}}'
        - --function_to_execute
        - pipeline_metrics_4
        command:
        - sh
        - -c
        - "\nif ! [ -x \"$(command -v pip)\" ]; then\n    python3 -m ensurepip ||\
          \ python3 -m ensurepip --user || apt-get install python3-pip\nfi\n\nPIP_DISABLE_PIP_VERSION_CHECK=1\
          \ python3 -m pip install --quiet --no-warn-script-location 'kfp==2.13.0'\
          \ '--no-deps' 'typing-extensions>=3.7.4,<5; python_version<\"3.9\"'  &&\
          \  python3 -m pip install --quiet --no-warn-script-location 'numpy' 'pandas'\
          \ 'scikit-learn' && \"$0\" \"$@\"\n"
        - sh
        - -ec
        - 'program_path=$(mktemp -d)


          printf "%s" "$0" > "$program_path/ephemeral_component.py"

          _KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         "$program_path/ephemeral_component.py"                         "$@"

          '
        - "\nimport kfp\nfrom kfp import dsl\nfrom kfp.dsl import *\nfrom typing import\
          \ *\n\ndef pipeline_metrics_4() -> NamedTuple('Metrics', [('metrics', dict)]):\n\
          \    \"\"\"\n    Pipeline metrics calculation\n    Generated from notebook\
          \ cell 4\n    \"\"\"\n    import json\n    from typing import NamedTuple\n\
          \    from collections import namedtuple\n\n    print(\"\U0001F504 Computing\
          \ metrics from cell 4...\")\n\n    # Original cell code\n    print(\"Hello\
          \ world!3\")\n\n    # Extract metrics from local variables - Fixed version\n\
          \    metrics = {}\n    for k, v in locals().items():\n        if (not k.startswith('_')\
          \ and \n            not callable(v) and \n            isinstance(v, (int,\
          \ float, str, bool)) and \n            k not in ['json', 'NamedTuple', 'namedtuple',\
          \ 'print']):\n            metrics[k] = v\n\n    # Add some default metrics\
          \ since the cell just prints\n    metrics['execution_status'] = 'completed'\n\
          \    metrics['cell_number'] = 4\n    metrics['message'] = 'Hello world!3'\n\
          \n    print(f\"\U0001F4CA Computed metrics: {list(metrics.keys())}\")\n\
          \    print(\"\u2705 Metrics computation completed\")\n\n    Metrics = namedtuple('Metrics',\
          \ ['metrics'])\n    return Metrics(metrics)\n\n"
        image: python:3.9
    exec-preprocessing:
      container:
        args:
        - --executor_input
        - '{{$}}'
        - --function_to_execute
        - preprocessing
        command:
        - sh
        - -c
        - "\nif ! [ -x \"$(command -v pip)\" ]; then\n    python3 -m ensurepip ||\
          \ python3 -m ensurepip --user || apt-get install python3-pip\nfi\n\nPIP_DISABLE_PIP_VERSION_CHECK=1\
          \ python3 -m pip install --quiet --no-warn-script-location 'kfp==2.13.0'\
          \ '--no-deps' 'typing-extensions>=3.7.4,<5; python_version<\"3.9\"'  &&\
          \  python3 -m pip install --quiet --no-warn-script-location 'numpy' 'pandas'\
          \ 'scikit-learn' && \"$0\" \"$@\"\n"
        - sh
        - -ec
        - 'program_path=$(mktemp -d)


          printf "%s" "$0" > "$program_path/ephemeral_component.py"

          _KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         "$program_path/ephemeral_component.py"                         "$@"

          '
        - "\nimport kfp\nfrom kfp import dsl\nfrom kfp.dsl import *\nfrom typing import\
          \ *\n\ndef preprocessing() -> str:\n    \"\"\"\n    Pipeline step: step:preprocessing\n\
          \    Generated from notebook cell 3\n    Original tags: step:preprocessing\n\
          \    \"\"\"\n    # Imports\n    import os\n    import sys\n    import json\n\
          \    import pickle\n    from pathlib import Path\n\n    print(\"\U0001F504\
          \ Executing preprocessing component...\")\n    print(\"\U0001F4DD Original\
          \ cell content from notebook cell 3\")\n\n    # Original cell code\n   \
          \ print(\"Hello world!2\")\n\n    print(\"\u2705 preprocessing component\
          \ execution completed\")\n\n    # Return results - Fixed version\n    result_vars\
          \ = [k for k in locals().keys() if not k.startswith('_') and not callable(locals().get(k,\
          \ None))]\n    if result_vars:\n        summary = f\"Executed successfully.\
          \ Created variables: {', '.join(result_vars[:5])}\"\n        if len(result_vars)\
          \ > 5:\n            summary += f\" and {len(result_vars) - 5} more\"\n \
          \       return summary\n    else:\n        return \"preprocessing completed\
          \ successfully\"\n\n"
        image: python:3.9
pipelineInfo:
  description: Generated from annotated notebook
  name: untitled
root:
  dag:
    tasks:
      data-loading:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-data-loading
        taskInfo:
          name: data-loading
      pipeline-metrics-4:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-pipeline-metrics-4
        dependentTasks:
        - preprocessing
        taskInfo:
          name: pipeline-metrics-4
      preprocessing:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-preprocessing
        dependentTasks:
        - data-loading
        taskInfo:
          name: preprocessing
schemaVersion: 2.1.0
sdkVersion: kfp-2.13.0
